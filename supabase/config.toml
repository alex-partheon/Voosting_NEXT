# Supabase 로컬 개발 환경 설정
# 이 파일은 `supabase init` 명령어로 생성되며, 로컬 개발 시 사용됩니다.

project_id = "cashup-local"

[api]
# API 서버 포트
port = 54321
# 스키마 목록 (공개할 스키마)
schemas = ["public", "storage", "graphql_public"]
# 추가 검색 경로
extra_search_path = ["public", "extensions"]
# API 최대 행 수
max_rows = 1000

[db]
# 데이터베이스 포트
port = 54322
# 메이저 버전
major_version = 15

[studio]
# Supabase Studio 포트
port = 54323
# API URL (자동 설정)
api_url = "http://localhost:54321"

[inbucket]
# 이메일 테스트용 Inbucket 포트
port = 54324
# SMTP 포트
smtp_port = 54325
# POP3 포트
pop3_port = 54326

[storage]
# 파일 크기 제한 (50MB)
file_size_limit = "50MiB"

[auth]
# 인증 설정
site_url = "http://localhost:3000"
# 추가 리다이렉트 URL
additional_redirect_urls = ["https://localhost:3000"]
# JWT 만료 시간 (초)
jwt_expiry = 3600
# 리프레시 토큰 회전 활성화
enable_refresh_token_rotation = true
# 리프레시 토큰 재사용 간격 (초)
refresh_token_reuse_interval = 10
# 이메일 확인 활성화
enable_signup = true

[auth.email]
# 이메일 인증 활성화
enable_signup = true
# 이메일 확인 필요
enable_confirmations = false

# 외부 OAuth 제공자 설정
[auth.external.kakao]
enabled = true
client_id = "env(NEXT_PUBLIC_KAKAO_CLIENT_ID)"
secret = "env(KAKAO_CLIENT_SECRET)"
# 리다이렉트 URL은 Kakao 개발자 콘솔에서 설정
redirect_uri = "http://localhost:54321/auth/v1/callback"

[auth.external.google]
enabled = false
client_id = ""
secret = ""
redirect_uri = "http://localhost:54321/auth/v1/callback"

[auth.external.github]
enabled = false
client_id = ""
secret = ""
redirect_uri = "http://localhost:54321/auth/v1/callback"

# 이메일 템플릿 설정
[auth.email.template.invite]
subject = "CashUp에 초대되었습니다"
content_path = "./supabase/templates/invite.html"

[auth.email.template.confirmation]
subject = "CashUp 이메일 확인"
content_path = "./supabase/templates/confirmation.html"

[auth.email.template.recovery]
subject = "CashUp 비밀번호 재설정"
content_path = "./supabase/templates/recovery.html"

[auth.email.template.magic_link]
subject = "CashUp 로그인 링크"
content_path = "./supabase/templates/magic_link.html"

[auth.email.template.email_change]
subject = "CashUp 이메일 변경 확인"
content_path = "./supabase/templates/email_change.html"

# Edge Functions 설정
[functions]
# 함수들이 위치할 디렉토리
# 예: ./supabase/functions/

# 실시간 설정
[realtime]
# 실시간 기능 활성화
enabled = true

# 분석 설정
[analytics]
# 분석 기능 활성화
enabled = false