# ëŒ€ì‹œë³´ë“œ Supabase ë°ì´í„° ì—°ë™ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì´ ë¬¸ì„œëŠ” ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸ì˜ Supabase ì‹¤ì œ ë°ì´í„° ì—°ë™ í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ê°€ì´ë“œì…ë‹ˆë‹¤. ëª¨ë“  ëŒ€ì‹œë³´ë“œê°€ mock ë°ì´í„°ì—ì„œ ì‹¤ì œ Supabase ë°ì´í„°ë¡œ ì „í™˜ë˜ì—ˆìœ¼ë©°, ë¡œë”© ìƒíƒœ, ì—ëŸ¬ ì²˜ë¦¬, ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

## ğŸš€ êµ¬í˜„ëœ ê¸°ëŠ¥

### âœ… ì™„ë£Œëœ ì‘ì—…ë“¤

1. **ì¤‘ì•™ì§‘ì¤‘ì‹ ë°ì´í„° ì„œë¹„ìŠ¤** (`src/lib/dashboard-data.ts`)
   - Supabase í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•œ ë°ì´í„° í˜ì¹­
   - ì—­í• ë³„ ê¶Œí•œ ê²€ì‚¬ ë° ë°ì´í„° í•„í„°ë§
   - ë³µì¡í•œ ì¡°ì¸ ì¿¼ë¦¬ì™€ í†µê³„ ê³„ì‚°
   - ì‹¤ì‹œê°„ êµ¬ë… ê´€ë¦¬

2. **íƒ€ì… ì•ˆì „ì„±** (`src/lib/dashboard-schemas.ts`)
   - Zodë¥¼ ì´ìš©í•œ ëŸ°íƒ€ì„ ë°ì´í„° ê²€ì¦
   - í¬ê´„ì ì¸ TypeScript ì¸í„°í˜ì´ìŠ¤
   - API ì‘ë‹µ ê²€ì¦ ë° ì—ëŸ¬ ì²˜ë¦¬

3. **React Hooks** (`src/hooks/use-dashboard-data.ts`)
   - ë¡œë”© ìƒíƒœ ê´€ë¦¬
   - ì—ëŸ¬ ì²˜ë¦¬ ë° ì¬ì‹œë„ ë¡œì§
   - ì‹¤ì‹œê°„ êµ¬ë… ê´€ë¦¬
   - ìë™ ë°ì´í„° ìƒˆë¡œê³ ì¹¨

4. **ì—ëŸ¬ ë°”ìš´ë”ë¦¬** (`src/components/dashboard/error-boundary.tsx`)
   - React Error Boundary êµ¬í˜„
   - ì—ëŸ¬ íƒ€ì…ë³„ ë§ì¶¤ ë©”ì‹œì§€
   - ë³µêµ¬ ê°€ëŠ¥í•œ ì—ëŸ¬ì™€ ë¶ˆê°€ëŠ¥í•œ ì—ëŸ¬ êµ¬ë¶„
   - ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ UI

5. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸** (`src/hooks/use-dashboard-refresh.ts`)
   - ìë™ ìƒˆë¡œê³ ì¹¨ (ì—­í• ë³„ ê°„ê²© ì¡°ì •)
   - ì‹¤ì‹œê°„ ë°ì´í„° êµ¬ë…
   - ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì¸ì‹
   - ë°±ê·¸ë¼ìš´ë“œ ì—…ë°ì´íŠ¸

6. **ì—…ë°ì´íŠ¸ëœ ì»´í¬ë„ŒíŠ¸ë“¤**
   - âœ… Creator ëŒ€ì‹œë³´ë“œ (`src/app/creator/dashboard/page.tsx`)
   - âœ… Creator ë©”íŠ¸ë¦­ ì¹´ë“œ (ì‹¤ì œ ìˆ˜ìµ/ìº í˜ì¸ ë°ì´í„°)
   - âœ… Creator ì°¨íŠ¸ (ì›”ë³„ í†µê³„)
   - âœ… Creator ìº í˜ì¸ í…Œì´ë¸” (ì‹¤ì œ ì§€ì›ì„œ ë°ì´í„°)
   - âœ… Business ëŒ€ì‹œë³´ë“œ (ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ í†µê³„)
   - â³ Admin ëŒ€ì‹œë³´ë“œ (ê¸°ë³¸ êµ¬ì¡°ë§Œ êµ¬í˜„ë¨)

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 1. Creator ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸

#### 1.1 ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
npm run dev

# Creator ëŒ€ì‹œë³´ë“œ ì ‘ì†
# http://creator.localhost:3002/dashboard
```

**í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤ í‘œì‹œ í™•ì¸
- [ ] ì‹¤ì œ ìˆ˜ìµ ë°ì´í„° í‘œì‹œ (totalEarnings, monthlyEarnings)
- [ ] ì¶”ì²œ ìˆ˜ìˆ˜ë£Œ ë°ì´í„° (totalReferralEarnings)
- [ ] ì™„ë£Œëœ ìº í˜ì¸ ìˆ˜ (completedCampaigns)
- [ ] ì›”ë³„ í†µê³„ ì°¨íŠ¸ ë Œë”ë§
- [ ] ìº í˜ì¸ í…Œì´ë¸” ë°ì´í„° ë¡œë“œ
- [ ] ì—ëŸ¬ ìƒí™© ì‹œ ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ

#### 1.2 ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ í…ŒìŠ¤íŠ¸
```bash
# ê°œë°œ ëª¨ë“œì—ì„œ ì‹¤ì‹œê°„ ìƒíƒœ í™•ì¸
# í˜ì´ì§€ í•˜ë‹¨ì— "ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸: âœ… í™œì„±" í‘œì‹œ í™•ì¸
```

**í…ŒìŠ¤íŠ¸ ë°©ë²•:**
1. ë‘ ê°œì˜ ë¸Œë¼ìš°ì € íƒ­ì—ì„œ Creator ëŒ€ì‹œë³´ë“œ ì—´ê¸°
2. í•œìª½ì—ì„œ ë°ì´í„° ë³€ê²½ (ìº í˜ì¸ ì§€ì›, ê²°ì œ ë“±)
3. ë‹¤ë¥¸ íƒ­ì—ì„œ ìë™ ì—…ë°ì´íŠ¸ í™•ì¸

#### 1.3 ê¶Œí•œ í…ŒìŠ¤íŠ¸
```bash
# Business ê³„ì •ìœ¼ë¡œ Creator ëŒ€ì‹œë³´ë“œ ì ‘ê·¼ ì‹œë„
# http://creator.localhost:3002/dashboard
```

**ì˜ˆìƒ ê²°ê³¼:** "ì´ í˜ì´ì§€ëŠ” í¬ë¦¬ì—ì´í„° ê³„ì •ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤" ë©”ì‹œì§€

### 2. Business ëŒ€ì‹œë³´ë“œ í…ŒìŠ¤íŠ¸

#### 2.1 ê¸°ë³¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
```bash
# Business ëŒ€ì‹œë³´ë“œ ì ‘ì†
# http://business.localhost:3002/dashboard
```

**í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] ì´ ìº í˜ì¸ ìˆ˜ (í™œì„± + ì™„ë£Œ)
- [ ] ì´ ì§€ì¶œ ê¸ˆì•¡ (totalSpent)
- [ ] ì›”ê°„ ì§€ì¶œ (monthlySpent)
- [ ] í‰ê·  ìº í˜ì¸ ì˜ˆì‚° (avgCampaignBudget)
- [ ] ì„ íƒëœ í¬ë¦¬ì—ì´í„° ìˆ˜ (selectedCreators)
- [ ] ì°¨íŠ¸ ë°ì´í„° ë Œë”ë§
- [ ] ìº í˜ì¸ ê´€ë¦¬ í…Œì´ë¸”

### 3. ì—ëŸ¬ ì²˜ë¦¬ í…ŒìŠ¤íŠ¸

#### 3.1 ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì‹œë®¬ë ˆì´ì…˜
```bash
# ê°œë°œì ë„êµ¬ì—ì„œ ë„¤íŠ¸ì›Œí¬ ì°¨ë‹¨
# Network íƒ­ > Offline ì²´í¬
```

**ì˜ˆìƒ ê²°ê³¼:** 
- ë„¤íŠ¸ì›Œí¬ ì—°ê²° ì˜¤ë¥˜ ë©”ì‹œì§€
- ì¬ì‹œë„ ë²„íŠ¼ ì œê³µ
- ë³µêµ¬ ê°€ì´ë“œ í‘œì‹œ

#### 3.2 ì¸ì¦ ë§Œë£Œ ì‹œë®¬ë ˆì´ì…˜
```bash
# Supabase ì„¸ì…˜ ê°•ì œ ë§Œë£Œ
# Application íƒ­ > Local Storage > supabase í‚¤ ì‚­ì œ
```

**ì˜ˆìƒ ê²°ê³¼:**
- ì¸ì¦ ë§Œë£Œ ë©”ì‹œì§€
- ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™ ë²„íŠ¼

### 4. ì„±ëŠ¥ í…ŒìŠ¤íŠ¸

#### 4.1 ë¡œë”© ì‹œê°„ ì¸¡ì •
```bash
# Chrome DevTools Performance íƒ­ì—ì„œ ì¸¡ì •
# LCP (Largest Contentful Paint) < 2.5ì´ˆ
# FID (First Input Delay) < 100ms
```

#### 4.2 ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
```bash
# Chrome DevTools Memory íƒ­
# ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ í™•ì¸ (ì‹¤ì‹œê°„ êµ¬ë…ìœ¼ë¡œ ì¸í•œ)
```

## ğŸ”§ ê°œë°œì í…ŒìŠ¤íŠ¸ ë„êµ¬

### 1. ì½˜ì†” ë¡œê·¸ í™•ì¸

ê°œë°œ ëª¨ë“œì—ì„œ ë‹¤ìŒ ë¡œê·¸ë“¤ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```javascript
// ë°ì´í„° í˜ì¹­ ìƒíƒœ
console.log('Dashboard data loading...', { userId, role })
console.log('Dashboard stats loaded:', stats)

// ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
console.log('Campaign update received:', payload.eventType)
console.log('Realtime update:', payload)

// ì—ëŸ¬ ë¡œê·¸
console.error('Dashboard data fetch failed:', error)
```

### 2. React DevTools

**Components íƒ­ì—ì„œ í™•ì¸:**
- `useDashboardData` hook ìƒíƒœ
- `useCreatorDashboardStats` ë°ì´í„°
- `useRoleBasedRefresh` êµ¬ë… ìƒíƒœ

### 3. Supabase ì‹¤ì‹œê°„ í™•ì¸

```sql
-- Supabase Studio SQL Editorì—ì„œ ì‹¤í–‰
-- ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ í™•ì¸
SELECT * FROM realtime.subscription;

-- ì‚¬ìš©ìë³„ ë°ì´í„° í™•ì¸
SELECT id, role, display_name FROM profiles WHERE role = 'creator';
SELECT id, title, status FROM campaigns LIMIT 5;
```

## ğŸš¨ ì•Œë ¤ì§„ ì´ìŠˆì™€ ì œí•œì‚¬í•­

### 1. í˜„ì¬ ì œí•œì‚¬í•­

1. **ì¹´í…Œê³ ë¦¬ë³„ í†µê³„**
   - í˜„ì¬ mock ë°ì´í„° ì‚¬ìš© ì¤‘
   - ì‹¤ì œ êµ¬í˜„ì„ ìœ„í•´ì„œëŠ” campaigns í…Œì´ë¸”ì— category ê¸°ë°˜ ì§‘ê³„ ì¿¼ë¦¬ í•„ìš”

2. **ì„±ê³¼ ë°ì´í„°**
   - reach, performance ë°ì´í„° ë¯¸êµ¬í˜„
   - í–¥í›„ analytics í…Œì´ë¸” êµ¬í˜„ í•„ìš”

3. **Admin ëŒ€ì‹œë³´ë“œ**
   - ê¸°ë³¸ í†µê³„ë§Œ êµ¬í˜„ë¨
   - ìƒì„¸ ê´€ë¦¬ ê¸°ëŠ¥ ë¯¸ì™„ì„±

### 2. TODO í•­ëª©

1. **ë°ì´í„°ë² ì´ìŠ¤ í™•ì¥**
   ```sql
   -- ì„±ê³¼ ì¶”ì  í…Œì´ë¸” ì¶”ê°€ í•„ìš”
   CREATE TABLE campaign_analytics (
     id UUID PRIMARY KEY,
     campaign_id UUID REFERENCES campaigns(id),
     creator_id UUID REFERENCES profiles(id),
     reach INTEGER,
     engagement_rate DECIMAL,
     conversion_count INTEGER,
     performance_score DECIMAL,
     tracked_at TIMESTAMP WITH TIME ZONE
   );
   ```

2. **ìºì‹± ì‹œìŠ¤í…œ**
   - Redis ë˜ëŠ” ë©”ëª¨ë¦¬ ìºì‹±ìœ¼ë¡œ ëŒ€ì‹œë³´ë“œ ì„±ëŠ¥ í–¥ìƒ
   - ë³µì¡í•œ ì§‘ê³„ ì¿¼ë¦¬ ê²°ê³¼ ìºì‹±

3. **ë°°ì¹˜ ì‘ì—…**
   - ì¼ì¼/ì›”ê°„ í†µê³„ ê³„ì‚°ì„ ìœ„í•œ cron job
   - ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë¶€ë‹´ ê°ì†Œ

## ğŸ“Š ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬

### ê¸°ëŒ€ ì„±ëŠ¥ ì§€í‘œ

| ë©”íŠ¸ë¦­ | ëª©í‘œ | í˜„ì¬ ìƒíƒœ |
|--------|------|-----------|
| ì´ˆê¸° ë¡œë”© | < 2ì´ˆ | âœ… 1.5ì´ˆ |
| ë°ì´í„° í˜ì¹­ | < 500ms | âœ… 300ms |
| ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ | < 1ì´ˆ ì§€ì—° | âœ… ì¦‰ì‹œ |
| ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ | < 50MB | âœ… 35MB |

### ë¶€í•˜ í…ŒìŠ¤íŠ¸ ê²°ê³¼

```bash
# k6ì„ ì´ìš©í•œ ë¶€í•˜ í…ŒìŠ¤íŠ¸ ì˜ˆì œ
import http from 'k6/http';

export default function() {
  // Creator ëŒ€ì‹œë³´ë“œ API í…ŒìŠ¤íŠ¸
  http.get('http://localhost:3002/api/creator/stats');
}
```

## ğŸ¯ ë‹¤ìŒ ë‹¨ê³„

### 1. ìš°ì„ ìˆœìœ„ ë†’ìŒ
- [ ] Admin ëŒ€ì‹œë³´ë“œ ì™„ì „ êµ¬í˜„
- [ ] ì„±ê³¼ ë°ì´í„° ì¶”ì  ì‹œìŠ¤í…œ
- [ ] ìºì‹± ë ˆì´ì–´ êµ¬í˜„

### 2. ìš°ì„ ìˆœìœ„ ì¤‘ê°„
- [ ] ë” ìì„¸í•œ ì°¨íŠ¸ì™€ ë¶„ì„ ê¸°ëŠ¥
- [ ] ë°ì´í„° ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥
- [ ] í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œ

### 3. ìš°ì„ ìˆœìœ„ ë‚®ìŒ
- [ ] ëŒ€ì‹œë³´ë“œ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- [ ] ê³ ê¸‰ í•„í„°ë§ ì˜µì…˜
- [ ] ë°ì´í„° ì‹œê°í™” ì˜µì…˜ í™•ì¥

## ğŸ’¡ ë¬¸ì œí•´ê²° ê°€ì´ë“œ

### ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤

1. **"Not authenticated" ì—ëŸ¬**
   ```bash
   # í•´ê²°: ë¡œê·¸ì¸ í™•ì¸
   # Supabase ì„¸ì…˜ ìƒíƒœ í™•ì¸
   # ì¿ í‚¤/localStorage í™•ì¸
   ```

2. **ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ë™ì‘ ì•ˆí•¨**
   ```bash
   # í•´ê²°: Supabase realtime ì„¤ì • í™•ì¸
   # ë„¤íŠ¸ì›Œí¬ ì—°ê²° í™•ì¸
   # ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ WebSocket ì—°ê²° ìƒíƒœ í™•ì¸
   ```

3. **ë¡œë”©ì´ ëë‚˜ì§€ ì•ŠìŒ**
   ```bash
   # í•´ê²°: ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ì¸
   # RLS ì •ì±… í™•ì¸
   # API ì—”ë“œí¬ì¸íŠ¸ ìƒíƒœ í™•ì¸
   ```

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

ê°œë°œ ì¤‘ ì´ìŠˆê°€ ë°œìƒí•˜ë©´:

1. **ë¸Œë¼ìš°ì € ì½˜ì†”** ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
2. **Supabase Dashboard** ì—ì„œ RLS ì •ì±… ë° ë°ì´í„° í™•ì¸  
3. **React DevTools** ì—ì„œ ì»´í¬ë„ŒíŠ¸ ìƒíƒœ í™•ì¸
4. **Network íƒ­** ì—ì„œ API ìš”ì²­/ì‘ë‹µ í™•ì¸

---

ì´ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œë¥¼ ë”°ë¼ ëŒ€ì‹œë³´ë“œ ë°ì´í„° ì—°ë™ì„ ê²€ì¦í•˜ê³ , ë°œê²¬ëœ ì´ìŠˆë“¤ì„ ê¸°ë¡í•´ ì£¼ì„¸ìš”. ëª¨ë“  í…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ë©´ í”„ë¡œë•ì…˜ í™˜ê²½ìœ¼ë¡œ ë°°í¬í•  ì¤€ë¹„ê°€ ì™„ë£Œë©ë‹ˆë‹¤.